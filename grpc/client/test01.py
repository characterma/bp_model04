#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
sys.path.append(r'grpc/proto/')
import numpy as np
import pandas as pd
import grpc
import anbp_pb2, anbp_pb2_grpc

# IP = "192.168.100.122:50056"
# IP = "192.168.100.122:50057"
# IP = "192.168.100.232:50057"
# IP = "39.96.40.181:50057"
# IP = "47.95.198.148:50057"
# IP = "39.97.104.203:50057"

# 线上旧模型的一个节点
# IP = "47.94.169.147:50056"

# 武轩 血压模型 的地址
# IP = "39.102.54.99:50060"

# 线上 NG 的地址 个人模型
IP = "39.97.198.78:50057"   # NG
# IP = "39.96.40.181:50057"

# 旧模型 NG 的地址
# IP = "47.95.230.250:50056"
# IP = "39.102.37.213:50056"

# test_bp_features = "2.25085,0.59804,0.25490,0.85784,0.12745,0.44145,0.55855,0.22688,0.31303,883.71198,1108.14832,3429.66992,3.08876,0.64706,0.28431,0.93627,0.13725,0.44145,0.55855,0.24410,0.33659,1496.56177,1880.57471,5394.35059,3.19822,0.69608,0.30392,1.00980,0.14706,0.45306,0.54694,0.26126,0.35021,1603.76343,2094.39258,5960.28125,3.32031,0.70588,0.30392,1.00980,0.14706,0.46925,0.53075,0.26748,0.34869,1862.28906,2126.31738,6029.60059,3.70514,0.71079,0.29902,1.00980,0.14706,0.46816,0.53184,0.26186,0.33076,1840.14758,2185.86133,6710.45898,3.74268,0.71079,0.29902,1.00980,0.14706,0.46354,0.53646,0.26616,0.32379,1874.84888,2220.48364,6781.02051,3.67780,0.69608,0.29412,0.99020,0.14706,0.46502,0.53498,0.26616,0.30856,1843.60999,2077.30835,6596.97803"

# test_bp_features = "3.71283,0.43628,0.21569,0.65687,0.11765,0.48484,0.51516,0.15353,0.17065,834.87836,865.17395,5138.44922,4.03782,0.44118,0.22549,0.66177,0.11765,0.46090,0.53910,0.14795,0.20845,948.71759,1238.56934,5606.43262,2.67713,0.44608,0.20098,0.64706,0.10784,0.51382,0.48618,0.21955,0.23759,1018.35803,1198.87476,3468.54297,2.43411,0.42157,0.21079,0.64216,0.11274,0.53260,0.46740,0.20324,0.21664,793.08868,828.43854,3274.20410,3.10138,0.43627,0.21569,0.65687,0.11764,0.47264,0.52736,0.14836,0.19286,645.58344,849.95502,4294.35059,2.63145,0.47549,0.20588,0.67647,0.10784,0.49130,0.50870,0.17527,0.22104,693.15179,854.33801,3518.31104,3.16459,0.50000,0.22549,0.71568,0.12745,0.51535,0.48465,0.21812,0.21433,857.24084,976.62189,4770.99512,3.67189,0.48530,0.23039,0.71569,0.12745,0.48381,0.51619,0.17054,0.19776,936.61829,1028.86914,5251.23145,3.65795,0.48039,0.22549,0.71078,0.12745,0.47732,0.52268,0.16773,0.18582,931.74475,992.20386,5227.28271"

# test_bp_features = "4.48897,0.47059,0.23529,0.70098,0.12255,0.42885,0.57115,0.16429,0.21900,1106.11426,1437.97852,6881.58887,6.98279,0.46078,0.22549,0.68627,0.11765,0.43316,0.56684,0.16214,0.19934,1617.22803,1923.03467,9597.71875,6.15096,0.48530,0.21569,0.70098,0.11765,0.50277,0.49723,0.19711,0.20554,1835.15088,1886.95117,8557.81836,5.40624,0.51961,0.23039,0.73529,0.12255,0.51199,0.48801,0.21695,0.24724,1633.11572,1727.74170,7621.78906,4.00731,0.52941,0.23529,0.75490,0.12745,0.48230,0.51770,0.20398,0.23796,1218.39441,1458.08130,5841.74268,3.50115,0.49510,0.23530,0.74020,0.12745,0.48849,0.51151,0.19688,0.21754,1023.58038,1126.37036,5048.31836,3.19578,0.46568,0.23529,0.69118,0.12745,0.47162,0.52838,0.17531,0.22094,839.50500,1040.21509,4651.58594,3.39841,0.46078,0.22549,0.68627,0.12745,0.44567,0.55433,0.15877,0.20145,812.32111,962.29749,4804.76855,3.09828,0.46078,0.22549,0.68627,0.12745,0.44700,0.55300,0.16296,0.19866,766.70526,908.78113,4394.72656,2.69911,0.44117,0.22549,0.66667,0.12255,0.44502,0.55498,0.16409,0.20906,609.44629,830.30157,3906.75342"
# test_bp_features = "4.26479,0.46078,0.25000,0.71078,0.11765,0.41617,0.58383,0.18229,0.28438,1201.12988,1887.87793,6826.85254,3.05225,0.43137,0.22549,0.63235,0.10784,0.44048,0.55952,0.20643,0.28873,1001.40637,1310.14771,4211.67041,2.85727,0.39216,0.21569,0.60784,0.11275,0.41788,0.58212,0.13595,0.27979,621.34100,1004.82501,3928.86279,3.17048,0.37255,0.21569,0.59804,0.11275,0.38194,0.61806,0.12891,0.26316,637.01147,1066.42285,4392.25977,2.71812,0.38725,0.21569,0.60784,0.10784,0.40457,0.59543,0.13542,0.26597,578.37115,988.93121,3548.36963,2.88903,0.40196,0.21078,0.61765,0.10784,0.47694,0.52306,0.16902,0.23071,698.20020,934.21704,4035.16382,3.26730,0.40196,0.20588,0.60784,0.10784,0.47126,0.52874,0.16902,0.21524,757.10071,934.97333,4304.11182,3.31905,0.38726,0.21078,0.60294,0.10784,0.43656,0.56344,0.14800,0.25194,725.04163,1130.33887,4389.05957,3.29389,0.38236,0.22549,0.60784,0.11275,0.40267,0.59733,0.13175,0.28777,725.04163,1233.95764,4530.02344,2.90412,0.37255,0.21569,0.58823,0.10784,0.41082,0.58918,0.13056,0.23549,656.74585,934.79651,3819.83911,2.90703,0.37255,0.20588,0.58823,0.10784,0.45708,0.54292,0.14235,0.21812,671.87866,871.81396,3871.94165,4.92955,0.38236,0.20588,0.58824,0.10784,0.45309,0.54691,0.14235,0.18975,963.31177,1143.17712,6348.91504,5.02534,0.38726,0.21569,0.59314,0.10784,0.45171,0.54829,0.13414,0.18403,1011.41333,1295.27710,6859.32031,4.67399,0.38235,0.21569,0.59804,0.10784,0.43286,0.56714,0.13120,0.21505,854.86926,1297.47827,6205.81787,3.84987,0.39216,0.21569,0.60784,0.10784,0.42208,0.57792,0.13748,0.20883,745.78613,1041.17505,5425.06934,3.65287,0.39706,0.21569,0.60784,0.10784,0.42208,0.57792,0.13888,0.20166,738.68341,964.92847,5036.16895,3.67806,0.39216,0.21569,0.59314,0.11274,0.40129,0.59871,0.13233,0.22051,721.66980,1135.37158,5054.87695"
# test_bp_features = "2.09734,0.42157,0.22549,0.64216,0.10784,0.45749,0.54251,0.22497,0.28242,661.06335,772.11450,2783.84619,5.08306,0.45098,0.22549,0.66666,0.11765,0.45496,0.54504,0.20352,0.23686,1130.36316,1348.42285,6808.00684,6.10485,0.45098,0.22549,0.66666,0.11765,0.44134,0.55866,0.16378,0.22087,1442.84082,1831.67041,8635.95703,4.95869,0.44608,0.20588,0.64705,0.10784,0.47401,0.52599,0.18226,0.24460,1332.00391,1643.39221,6610.14844,4.47786,0.44118,0.21568,0.65686,0.11274,0.47402,0.52598,0.16465,0.22313,1224.56177,1406.36987,6382.79492,4.29767,0.44118,0.22549,0.66667,0.11765,0.43639,0.56361,0.15670,0.22313,1131.71704,1414.65747,6405.79395"

test_bp_features = "7.269591,0.433594,0.230469,0.664062,0.126953,0.485255,0.514745,0.158527,0.197405,547.9779,656.10547,3803.243,7.248942,0.423828,0.234375,0.658203,0.134766,0.48876,0.51124,0.141531,0.182958,532.4972,536.85504,3129.9,6.650124,0.423828,0.251953,0.677734,0.148438,0.478108,0.521892,0.147841,0.180689,553.2503,564.6733,3329.5298,6.639707,0.439453,0.255859,0.693359,0.152344,0.471101,0.528899,0.141764,0.187815,480.54263,595.2342,3384.6697,6.653559,0.443359,0.255859,0.699219,0.154297,0.473511,0.526489,0.141487,0.183214,477.1227,586.3308,3319.621"
# test_bp_features = "4.32536,0.50980,0.24510,0.75980,0.13725,0.45529,0.54471,0.18653,0.23692,1542.80591,1727.82129,6226.59766"
# test_bp_features = "4.32536,0.50980,0.24510,0.75980,0.13725,0.45529,0.54471,0.18653,0.23692,1542.80591,1727.82129,6226.59766,4.32536,0.50980,0.24510,0.75980,0.13725,0.45529,0.54471,0.18653,0.23692,1542.80591,1727.82129,6226.59766"
# test_bp_features = "4.32536,0.50980,0.24510,0.75980,0.13725,0.45529,0.54471,0.18653,0.23692,1542.80591,1727.82129,6226.59766,3.32536,0.50980,0.24510,0.75980,0.13725,0.45529,0.54471,0.18653,0.23692,1542.80591,1727.82129,6226.59766,4.32536,0.50980,0.24510,0.75980,0.13725,0.45529,0.54471,0.18653,0.23692,1542.80591,1727.82129,6226.59766"
# test_bp_features = "9.40277,0.48039,0.22549,0.70098,0.11765,0.48324,0.51676,0.16402,0.18523,2335.56934,2371.82178,13093.86230,10.36426,0.49020,0.22549,0.72059,0.12745,0.45296,0.54704,0.16568,0.19862,2528.11963,3036.77832,14361.83984"
# test_bp_features = "8.66891,0.51471,0.23039,0.74510,0.12745,0.50379,0.49621,0.18922,0.19380,2265.68213,2542.35156,12278.53711,9.13125,0.52941,0.23529,0.76471,0.13235,0.49433,0.50567,0.18066,0.19454,2460.48706,2656.55103,13262.73340,8.96721,0.50980,0.23529,0.74510,0.12745,0.48894,0.51106,0.17853,0.18673,2333.10645,2411.02222,13056.86328,9.00588,0.50000,0.23529,0.73039,0.12745,0.48638,0.51362,0.17149,0.18451,2254.10596,2410.68799,13143.61035,9.03724,0.48529,0.22549,0.71079,0.12745,0.48638,0.51362,0.17036,0.18147,2206.29492,2322.01270,12899.43359,8.98766,0.47059,0.22549,0.69608,0.11765,0.50183,0.49817,0.17154,0.16773,2095.21118,2089.06421,12432.84766,9.08262,0.48039,0.21569,0.69608,0.11765,0.51667,0.48333,0.16893,0.16773,2107.19604,2002.59448,12573.81738,8.98203,0.46079,0.21569,0.68137,0.11765,0.50487,0.49513,0.16295,0.17151,1999.92847,1982.68506,12319.22168,8.86327,0.44608,0.21569,0.65686,0.11765,0.50856,0.49144,0.15891,0.17327,1960.24634,2109.90845,12207.57520"
# test_bp_features = "1.68086,0.80882,0.35294,1.15687,0.18627,0.54875,0.45125,0.28615,0.29052,1060.27576,1053.96021,3457.95410,1.57882,0.80392,0.35294,1.17157,0.19118,0.50509,0.49491,0.26049,0.29422,1003.39160,1034.94507,3352.84668,1.54119,0.81372,0.35294,1.18628,0.18628,0.50509,0.49491,0.25669,0.29882,1015.69788,1015.49670,3347.61475,1.52292,0.80392,0.36765,1.17647,0.19118,0.50785,0.49215,0.27650,0.30066,1015.69788,1027.53418,3371.62891,1.65383,0.79902,0.37255,1.18137,0.20098,0.51579,0.48421,0.27992,0.30137,1046.15649,1048.45312,3533.44775,1.64863,0.79412,0.36274,1.17647,0.19608,0.48889,0.51111,0.27137,0.30699,1044.94067,1052.10461,3533.44775,1.61715,0.79902,0.35294,1.16177,0.19608,0.47733,0.52267,0.26019,0.30699,1045.24561,1076.26709,3462.27856,1.62742,0.80882,0.34313,1.17647,0.19118,0.53005,0.46995,0.27807,0.30440,1099.56885,1034.99268,3461.85986,1.66527,0.80882,0.34314,1.17647,0.19608,0.54494,0.45506,0.29906,0.29513,1119.44385,1034.99268,3519.85376,1.68393,0.79412,0.35784,1.17647,0.19608,0.50953,0.49047,0.28362,0.28632,1031.50244,1139.24573,3565.53784"
# test_bp_features = "6.092850,0.453125,0.273438,0.726562,0.152344,0.460254,0.539746,0.152789,0.181171,925.855591,1084.721069,6018.980469,6.186612,0.449219,0.269531,0.718750,0.152344,0.459619,0.540381,0.147882,0.175636,880.776978,1055.958984,5983.052734,6.103845,0.451172,0.269531,0.726562,0.152344,0.458701,0.541299,0.148643,0.180696,814.927002,970.325439,5452.737305,6.180950,0.455078,0.269531,0.724609,0.152344,0.456755,0.543245,0.148643,0.181841,878.679321,1052.084961,5626.586426,6.183826,0.458984,0.269531,0.724609,0.152344,0.461689,0.538311,0.150072,0.178924,992.578979,1119.998901,6335.895508,6.097229,0.462891,0.273438,0.738281,0.158203,0.459264,0.540736,0.150417,0.177865,1006.262695,1145.663208,6423.263672,6.096413,0.462891,0.277344,0.738281,0.156250,0.459264,0.540736,0.149238,0.176603,1005.657471,1189.702759,6522.362793,6.018370,0.470703,0.277344,0.750000,0.158203,0.457386,0.542614,0.153394,0.181474,1037.984619,1249.816406,6888.174805,5.991086,0.470703,0.283203,0.750000,0.162109,0.457371,0.542629,0.154491,0.187520,1043.498169,1289.709473,7004.988281"

# test_bp_features = "6.001672,0.433594,0.275391,0.710938,0.156250,0.438381,0.561619,0.141435,0.184013,798.187378,1001.504883,5564.544922,6.141995,0.431641,0.271484,0.703125,0.148438,0.437333,0.562667,0.140587,0.188432,830.280640,1024.979370,5707.358398,6.464144,0.447266,0.253906,0.710938,0.136719,0.431062,0.568938,0.147822,0.198889,997.043945,1212.125000,6140.415039,6.437403,0.453125,0.259766,0.710938,0.148438,0.465310,0.534690,0.152331,0.181124,996.712219,1121.590332,5975.692871"


features_1 = "3.71283,0.43628,0.21569,0.65687,0.11765,0.48484,0.51516,0.15353,0.17065,834.87836,865.17395,5138.44922,4.03782,0.44118,0.22549,0.66177,0.11765,0.46090,0.53910,0.14795,0.20845,948.71759,1238.56934,5606.43262,2.67713,0.44608,0.20098,0.64706,0.10784,0.51382,0.48618,0.21955,0.23759,1018.35803,1198.87476,3468.54297,2.43411,0.42157,0.21079,0.64216,0.11274,0.53260,0.46740,0.20324,0.21664,793.08868,828.43854,3274.20410,3.10138,0.43627,0.21569,0.65687,0.11764,0.47264,0.52736,0.14836,0.19286,645.58344,849.95502,4294.35059,2.63145,0.47549,0.20588,0.67647,0.10784,0.49130,0.50870,0.17527,0.22104,693.15179,854.33801,3518.31104,3.16459,0.50000,0.22549,0.71568,0.12745,0.51535,0.48465,0.21812,0.21433,857.24084,976.62189,4770.99512,3.67189,0.48530,0.23039,0.71569,0.12745,0.48381,0.51619,0.17054,0.19776,936.61829,1028.86914,5251.23145,3.65795,0.48039,0.22549,0.71078,0.12745,0.47732,0.52268,0.16773,0.18582,931.74475,992.20386,5227.28271"
features_2 = "4.48897,0.47059,0.23529,0.70098,0.12255,0.42885,0.57115,0.16429,0.21900,1106.11426,1437.97852,6881.58887,6.98279,0.46078,0.22549,0.68627,0.11765,0.43316,0.56684,0.16214,0.19934,1617.22803,1923.03467,9597.71875,6.15096,0.48530,0.21569,0.70098,0.11765,0.50277,0.49723,0.19711,0.20554,1835.15088,1886.95117,8557.81836,5.40624,0.51961,0.23039,0.73529,0.12255,0.51199,0.48801,0.21695,0.24724,1633.11572,1727.74170,7621.78906,4.00731,0.52941,0.23529,0.75490,0.12745,0.48230,0.51770,0.20398,0.23796,1218.39441,1458.08130,5841.74268,3.50115,0.49510,0.23530,0.74020,0.12745,0.48849,0.51151,0.19688,0.21754,1023.58038,1126.37036,5048.31836,3.19578,0.46568,0.23529,0.69118,0.12745,0.47162,0.52838,0.17531,0.22094,839.50500,1040.21509,4651.58594,3.39841,0.46078,0.22549,0.68627,0.12745,0.44567,0.55433,0.15877,0.20145,812.32111,962.29749,4804.76855,3.09828,0.46078,0.22549,0.68627,0.12745,0.44700,0.55300,0.16296,0.19866,766.70526,908.78113,4394.72656,2.69911,0.44117,0.22549,0.66667,0.12255,0.44502,0.55498,0.16409,0.20906,609.44629,830.30157,3906.75342"
features_3 = "4.26479,0.46078,0.25000,0.71078,0.11765,0.41617,0.58383,0.18229,0.28438,1201.12988,1887.87793,6826.85254,3.05225,0.43137,0.22549,0.63235,0.10784,0.44048,0.55952,0.20643,0.28873,1001.40637,1310.14771,4211.67041,2.85727,0.39216,0.21569,0.60784,0.11275,0.41788,0.58212,0.13595,0.27979,621.34100,1004.82501,3928.86279,3.17048,0.37255,0.21569,0.59804,0.11275,0.38194,0.61806,0.12891,0.26316,637.01147,1066.42285,4392.25977,2.71812,0.38725,0.21569,0.60784,0.10784,0.40457,0.59543,0.13542,0.26597,578.37115,988.93121,3548.36963,2.88903,0.40196,0.21078,0.61765,0.10784,0.47694,0.52306,0.16902,0.23071,698.20020,934.21704,4035.16382,3.26730,0.40196,0.20588,0.60784,0.10784,0.47126,0.52874,0.16902,0.21524,757.10071,934.97333,4304.11182,3.31905,0.38726,0.21078,0.60294,0.10784,0.43656,0.56344,0.14800,0.25194,725.04163,1130.33887,4389.05957,3.29389,0.38236,0.22549,0.60784,0.11275,0.40267,0.59733,0.13175,0.28777,725.04163,1233.95764,4530.02344,2.90412,0.37255,0.21569,0.58823,0.10784,0.41082,0.58918,0.13056,0.23549,656.74585,934.79651,3819.83911,2.90703,0.37255,0.20588,0.58823,0.10784,0.45708,0.54292,0.14235,0.21812,671.87866,871.81396,3871.94165,4.92955,0.38236,0.20588,0.58824,0.10784,0.45309,0.54691,0.14235,0.18975,963.31177,1143.17712,6348.91504,5.02534,0.38726,0.21569,0.59314,0.10784,0.45171,0.54829,0.13414,0.18403,1011.41333,1295.27710,6859.32031,4.67399,0.38235,0.21569,0.59804,0.10784,0.43286,0.56714,0.13120,0.21505,854.86926,1297.47827,6205.81787,3.84987,0.39216,0.21569,0.60784,0.10784,0.42208,0.57792,0.13748,0.20883,745.78613,1041.17505,5425.06934,3.65287,0.39706,0.21569,0.60784,0.10784,0.42208,0.57792,0.13888,0.20166,738.68341,964.92847,5036.16895,3.67806,0.39216,0.21569,0.59314,0.11274,0.40129,0.59871,0.13233,0.22051,721.66980,1135.37158,5054.87695"
features_4 = "2.09734,0.42157,0.22549,0.64216,0.10784,0.45749,0.54251,0.22497,0.28242,661.06335,772.11450,2783.84619,5.08306,0.45098,0.22549,0.66666,0.11765,0.45496,0.54504,0.20352,0.23686,1130.36316,1348.42285,6808.00684,6.10485,0.45098,0.22549,0.66666,0.11765,0.44134,0.55866,0.16378,0.22087,1442.84082,1831.67041,8635.95703,4.95869,0.44608,0.20588,0.64705,0.10784,0.47401,0.52599,0.18226,0.24460,1332.00391,1643.39221,6610.14844,4.47786,0.44118,0.21568,0.65686,0.11274,0.47402,0.52598,0.16465,0.22313,1224.56177,1406.36987,6382.79492,4.29767,0.44118,0.22549,0.66667,0.11765,0.43639,0.56361,0.15670,0.22313,1131.71704,1414.65747,6405.79395"
features_5 = "4.32536,0.50980,0.24510,0.75980,0.13725,0.45529,0.54471,0.18653,0.23692,1542.80591,1727.82129,6226.59766,5.77866,0.50490,0.24510,0.74020,0.12745,0.43907,0.56093,0.18004,0.28381,1960.98486,2683.86768,9055.74805,5.83573,0.43628,0.24510,0.67647,0.12745,0.43491,0.56509,0.16015,0.28548,1682.96729,2342.36230,8866.72461,6.34344,0.43137,0.22549,0.65686,0.11275,0.43158,0.56842,0.16008,0.29658,1795.73535,2307.40576,8921.81445,6.98115,0.46078,0.23039,0.69608,0.12745,0.48021,0.51979,0.17311,0.22583,1982.28723,2202.21875,10383.86719,7.92241,0.49510,0.24510,0.73529,0.12745,0.46092,0.53908,0.17535,0.21890,2204.45166,2624.64502,11940.10547,8.05115,0.50490,0.25000,0.75000,0.12745,0.44779,0.55221,0.18001,0.22636,2246.64502,2838.99414,12411.58203,7.47045,0.50000,0.25490,0.75980,0.13235,0.43767,0.56233,0.17734,0.24517,2149.39551,2778.54980,11445.53711,7.03994,0.50000,0.25980,0.76471,0.13725,0.43345,0.56655,0.17720,0.26332,2118.38867,2839.34741,11177.79297,6.87882,0.45098,0.25490,0.69608,0.13725,0.46383,0.53617,0.17889,0.22876,1900.07715,2575.32031,11050.06934,6.85327,0.45098,0.24510,0.70098,0.12745,0.45468,0.54532,0.17972,0.22254,1854.45166,2570.71729,10060.75000,6.94354,0.48039,0.24020,0.72059,0.12745,0.46063,0.53937,0.17203,0.23320,1910.47192,2499.15210,10229.00391"
features_6 = "9.40277,0.48039,0.22549,0.70098,0.11765,0.48324,0.51676,0.16402,0.18523,2335.56934,2371.82178,13093.86230,10.36426,0.49020,0.22549,0.72059,0.12745,0.45296,0.54704,0.16568,0.19862,2528.11963,3036.77832,14361.83984"
features_7 = "5.627079,0.513672,0.308594,0.826172,0.183594,0.442740,0.557260,0.164785,0.228018,945.607483,1235.233154,5822.534180,5.659994,0.501953,0.306641,0.810547,0.177734,0.447195,0.552805,0.167643,0.236608,969.285278,1100.584717,4914.355957,5.660217,0.509766,0.308594,0.814453,0.181641,0.449935,0.550065,0.166700,0.219395,974.326050,1131.143799,5230.702148,5.630476,0.529297,0.314453,0.845703,0.189453,0.433718,0.566282,0.167653,0.219395,962.075684,1162.284790,5448.780762,5.555935,0.527344,0.324219,0.853516,0.195312,0.419091,0.580909,0.160752,0.233932,1061.931885,1271.617188,5910.308105"




# test_bp_features = ",".join([features_1, features_2, features_3, features_4, features_5, features_6, features_7])

# test_bp_features = "0.56301,0.48529,0.29902,0.94118,0.08333,0.49430,0.50570,148.79442,150.92412,2199.63892,2602.99951,757.88916,0.86715,0.45098,0.22549,0.75000,0.08823,0.50129,0.49871,0.57379,0.55566,875.75281,770.59082,1115.71570"


# 20191023版本的lib库 计算的有异常值的ppg数据 
# test_bp_features = "0.29446,1.59804,1.14705,2.79412,0.16666,0.29102,0.70898,0.41059,0.27288,1057.86951,2828.89209,429.24451,0.27465,1.67647,1.25490,2.92647,0.38235,0.28492,0.71508,0.41059,0.83841,1154.10828,2909.52344,2585.97729,0.25014,1.65687,1.30882,2.95588,0.32353,0.26661,0.73339,0.38561,1.00081,1184.69934,3151.44824,2585.97729,0.25014,1.56373,1.24509,2.82843,0.38235,0.24394,0.75606,0.38561,1.03142,905.39014,2844.78613,2585.97729,0.25014,1.53922,1.24019,2.78431,0.38235,0.29013,0.70987,0.38561,1.03142,905.39014,2204.17725,2585.97729"

# test_bp_features = "0.51934,0.60784,0.97059,1.57843,0.11765,0.30478,0.69522,0.28961,0.65571,1152.17053,2524.96338,3248.15723"
# test_bp_features = "0.69323,0.49020,1.02941,1.53922,0.11275,0.49922,0.50078,0.49629,0.78471,713.31274,727.17480,1667.70166"
# test_bp_features = "6.337807,0.480469,0.273438,0.757812,0.158203,0.458229,0.541771,0.165129,0.200862,896.684937,1016.379272,5239.641113,6.401737,0.496094,0.263672,0.757812,0.146484,0.484993,0.515007,0.170973,0.182477,1009.600464,1056.933350,5732.584473,6.445662,0.492188,0.261719,0.746094,0.148438,0.484993,0.515007,0.168251,0.190722,1001.904663,1074.135376,5838.625977,6.425819,0.486328,0.261719,0.746094,0.142578,0.474631,0.525369,0.173232,0.198603,939.466248,1114.264160,5559.900391,6.293370,0.496094,0.261719,0.773438,0.148438,0.470223,0.529777,0.173747,0.197840,887.382019,1007.883911,5315.077148,6.074179,0.496094,0.281250,0.777344,0.160156,0.461264,0.538736,0.160896,0.192725,869.115479,1073.954346,5748.454102,6.093614,0.486328,0.283203,0.765625,0.160156,0.457920,0.542080,0.160290,0.191122,981.754578,1173.810791,6182.493652,6.342836,0.492188,0.273438,0.769531,0.154297,0.473127,0.526873,0.164372,0.191122,1021.461426,1186.279297,6224.996094,6.456138,0.498047,0.259766,0.771484,0.148438,0.478687,0.521313,0.167417,0.182751,1090.058350,1149.095215,6211.380371,6.435585,0.505859,0.257812,0.769531,0.148438,0.487882,0.512118,0.168986,0.179868,1097.524414,1126.364746,6130.002930,6.368675,0.494141,0.263672,0.759766,0.146484,0.469808,0.530192,0.163771,0.186184,1002.510254,1138.503906,6151.875977,6.324050,0.472656,0.273438,0.750000,0.162109,0.465176,0.534824,0.155072,0.183259,961.359131,1121.584839,6127.044922,6.229645,0.474609,0.273438,0.757812,0.158203,0.464008,0.535992,0.157389,0.179492,974.782837,1128.165039,6155.684082,6.161036,0.484375,0.273438,0.759766,0.158203,0.462878,0.537122,0.161288,0.194553,988.601318,1213.572021,6143.484375,6.325316,0.486328,0.267578,0.753906,0.152344,0.463683,0.536317,0.166672,0.191452,972.125977,1046.715820,5857.583496,6.344613,0.490234,0.267578,0.751953,0.146484,0.466986,0.533014,0.170555,0.199624,1027.294312,1172.839233,5979.650391,6.184036,0.494141,0.275391,0.773438,0.148438,0.462521,0.537479,0.165261,0.196495,1044.198364,1226.139282,5830.081543"
# test_bp_features = "6.498501,0.484375,0.257812,0.740234,0.144531,0.473764,0.526236,0.159379,0.177712,681.520264,766.573608,3986.621582,6.511340,0.480469,0.257812,0.734375,0.142578,0.461235,0.538765,0.158552,0.209415,681.520264,793.552734,3919.467773,6.594491,0.480469,0.253906,0.734375,0.140625,0.456663,0.543337,0.161106,0.210952,678.392334,789.764526,3798.113281,6.501454,0.482422,0.255859,0.734375,0.140625,0.450657,0.549343,0.163592,0.212540,697.650085,789.764526,3805.453613,6.503927,0.482422,0.255859,0.730469,0.142578,0.474239,0.525761,0.159421,0.200197,700.804321,766.615967,3714.993652,6.665403,0.480469,0.251953,0.728516,0.140625,0.475884,0.524116,0.157456,0.180219,614.256836,644.418335,3688.392578,6.718194,0.480469,0.250000,0.726562,0.140625,0.509235,0.490765,0.159269,0.186201,603.681763,604.138794,3118.084473,6.699262,0.476562,0.250000,0.720703,0.140625,0.491056,0.508944,0.158726,0.182898,632.941650,716.364380,4043.206543,6.673111,0.476562,0.250000,0.726562,0.140625,0.506140,0.493860,0.158151,0.163150,666.450562,701.161255,4199.061035,6.586533,0.484375,0.253906,0.732422,0.140625,0.506140,0.493860,0.158486,0.177740,658.040405,675.010620,3738.975586,6.498206,0.480469,0.257812,0.736328,0.144531,0.485595,0.514405,0.159978,0.191950,786.979980,780.685059,4151.648926,6.515453,0.478516,0.257812,0.738281,0.144531,0.480080,0.519920,0.160959,0.209871,832.490784,852.397095,4162.212891,6.596769,0.480469,0.253906,0.734375,0.142578,0.474447,0.525553,0.159216,0.204834,682.708313,764.853821,3729.094238,6.549589,0.484375,0.257812,0.740234,0.144531,0.488426,0.511574,0.160983,0.178562,712.740662,716.615112,3901.534180,6.447766,0.486328,0.261719,0.748047,0.144531,0.488426,0.511574,0.161330,0.171005,735.535278,716.615112,4242.444336,6.494308,0.486328,0.257812,0.736328,0.144531,0.491618,0.508382,0.160961,0.181642,720.872192,777.490112,4141.944336,6.508531,0.482422,0.255859,0.734375,0.140625,0.482010,0.517990,0.159986,0.210464,720.048950,807.662354,4064.502686,6.485835,0.480469,0.259766,0.736328,0.144531,0.468512,0.531488,0.159546,0.000000,0.000000,0.000000,4032.937012"
# 5ae46115 33f43701   73d3a978  d8877080  fc5cb908  3df13694  c5071592  8d4d2680 1486c491

# Model calculation error
# test_bp_features = "7.004529,0.384766,0.238281,0.625000,0.136719,0.482432,0.517568,0.122705,0.137201,607.318359,658.638794,4815.944824,7.055156,0.382812,0.238281,0.621094,0.136719,0.488863,0.511137,0.120341,0.131052,635.141357,680.365112,5157.715332,6.993486,0.384766,0.240234,0.625000,0.136719,0.477677,0.522323,0.122567,0.134051,634.504883,680.795471,5078.891602,6.984494,0.390625,0.242188,0.630859,0.136719,0.481391,0.518609,0.123844,0.135114,650.555847,672.949219,5003.733398,7.060190,0.384766,0.238281,0.625000,0.136719,0.482666,0.517334,0.122436,0.128977,652.905884,674.281128,5274.476074,7.036514,0.392578,0.238281,0.632812,0.136719,0.487555,0.512445,0.124271,0.129428,680.194763,689.572998,5377.095703,6.959665,0.398438,0.242188,0.640625,0.136719,0.490130,0.509870,0.127196,0.132605,680.194763,687.791260,5167.818359,6.907699,0.402344,0.242188,0.644531,0.136719,0.490765,0.509235,0.128342,0.133829,653.434570,676.660767,5080.603516,6.914789,0.396484,0.242188,0.640625,0.140625,0.486883,0.513117,0.126467,0.136717,642.415527,665.228027,4947.469727,6.991611,0.386719,0.242188,0.628906,0.138672,0.478645,0.521355,0.120641,0.133312,637.851807,685.095947,5169.966797,7.047232,0.380859,0.238281,0.619141,0.136719,0.476917,0.523083,0.119355,0.131074,630.125732,679.908630,5160.855957,7.027959,0.388672,0.238281,0.626953,0.138672,0.489248,0.510752,0.122658,0.131285,630.660217,651.838379,5000.923828,6.990062,0.396484,0.240234,0.636719,0.136719,0.497397,0.502602,0.128056,0.131389,693.778442,694.832275,5242.543945,6.987464,0.394531,0.242188,0.636719,0.136719,0.495235,0.504765,0.125650,0.130081,707.162720,723.764038,5572.417969,7.016383,0.394531,0.242188,0.634766,0.136719,0.494081,0.505919,0.123257,0.129041,671.023926,668.529907,5292.013672,7.008498,0.396484,0.238281,0.640625,0.136719,0.500296,0.499704,0.127715,0.129630,681.349121,676.433472,5347.073242,7.036292,0.392578,0.238281,0.632812,0.134766,0.491917,0.508083,0.125838,0.129474,694.159912,692.869446,5438.672852,7.055885,0.390625,0.238281,0.626953,0.136719,0.488823,0.511177,0.125182,0.000000,0.000000,0.000000,5345.436523"



user_info = """{
    "wearUserId": "f8vzWG7g",
    "age": 33,
    "height": 182,
    "weight": 70,
    "gender": 1
}"""



def run():
    channel = grpc.insecure_channel(IP)
    stub = anbp_pb2_grpc.GreeterStub(channel=channel)
    response = stub.ANBP(anbp_pb2.BPRequest(userInfo = user_info,
                                             oStatus = "-2",
                                             features=test_bp_features,
                                             preReportBP="150,90,90",
                                            #  preReportBP="0,-1",
                                             preReportTimeDiffMinute = "31"))
    print("status: {}, bloodPpressure: {}, timestamp: {}".format(response.status, response.bloodPpressure, response.timestamp))


# 只训练模型
# def run():
#     channel = grpc.insecure_channel(IP)
#     stub = anbp_pb2_grpc.GreeterStub(channel=channel)
#     response = stub.ANBP(anbp_pb2.BPRequest(userInfo = user_info,
#                                              oStatus = "-2"
#                                              ))
#     print("status: {}, bloodPpressure: {}, timestamp: {}".format(response.status, response.bloodPpressure, response.timestamp))



if __name__ == "__main__":

    run()